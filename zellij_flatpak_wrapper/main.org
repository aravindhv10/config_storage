* WORK SPACE
#+begin_src emacs-lisp
  (save-buffer)
  (org-babel-tangle)
  (async-shell-command "./do_copy.sh" "log" "err")
#+end_src

#+RESULTS:
: #<window 482 on log>

* Prepare the destination dir
#+begin_src sh :shebang #!/bin/sh :results output :tangle ./do_copy.sh
  mkdir -pv -- "${HOME}/bin" "${HOME}/exe"
#+end_src

* Zellij scripts inside the container

** Main script
#+begin_src sh :shebang #!/bin/sh :results output :tangle ./zellij.sh
  export PATH="${HOME}/exe:${HOME}/bin:/usr/lib/sdk/texlive/bin/x86_64-linux:/usr/lib/sdk/texlive/bin:/usr/lib/sdk/llvm19/bin:/usr/lib/sdk/rust-stable/bin:/app/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:"
  export SHELL="${HOME}/exe/nu"
  exec "${HOME}/exe/zellij" 'attach' '--create'
#+end_src

** Copy the script
#+begin_src sh :shebang #!/bin/sh :results output :tangle ./do_copy.sh
  cp -vf -- './zellij.sh' "${HOME}/bin/"
#+end_src

* Script to start the container

** Main script
#+begin_src sh :shebang #!/bin/sh :results output :tangle ./enter_emacs_flatpak.sh
  exec flatpak run '--talk-name=org.freedesktop.Flatpak' "--command=${HOME}/bin/zellij.sh" 'org.gnu.emacs'
#+end_src

** Copy the script
#+begin_src sh :shebang #!/bin/sh :results output :tangle ./do_copy.sh
  cp -vf -- './enter_emacs_flatpak.sh' "${HOME}/bin/"
#+end_src

* Emacs daemon

** The script
#+begin_src sh :shebang #!/bin/sh :results output :tangle ./emd.sh
  exec emacs-wrapper --bg-daemon=def
#+end_src

** Copy the script
#+begin_src sh :shebang #!/bin/sh :results output :tangle ./do_copy.sh
  cp -vf -- './emd.sh' "${HOME}/bin/"
#+end_src

* Emacs client

** The script
#+begin_src sh :shebang #!/bin/sh :results output :tangle ./emc.sh
  exec  emacsclient -c ${@}
#+end_src

** Copy the script
#+begin_src sh :shebang #!/bin/sh :results output :tangle ./do_copy.sh
  cp -vf -- './emc.sh' "${HOME}/bin/"
#+end_src
